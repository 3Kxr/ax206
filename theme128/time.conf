Display dpf {
	Driver 'DPF'
	Port 'usb0'
	Font '6x8'
	Foreground 'ffffff'
	Background 'ffffff00'
	Basecolor '000000' #ffffff00
	Orientation 0 # Orientation value from 0-3
	Backlight backlight # Backlight variable control
}

Widget Bgnd {
	class 'Image'
	file imgadir . 'back.png'
	reload 1
	update hour
	inverted 0
	visible 1
}

Widget Month1 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%m', time()),0,1) . '.png'
	reload 1
	update minute
	inverted 0
	visible 1
}

Widget Month2 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%m', time()),1,1) . '.png'
	reload 1
	update minute
	inverted 0
	visible 1
}

Widget Months {
	class 'Image'
	file imgadir . 'date-.png'
	reload 1
	update minute
	inverted 0
	visible 1
}

Widget Day1 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%d', time()),0,1) . '.png'
	reload 1
	update minute
	inverted 0
	visible 1
}

Widget Day2 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%d', time()),1,1) . '.png'
	reload 1
	update minute
	inverted 0
	visible 1
}

Widget Week1 {
	class 'Image'
	file imgadir . 'week'. strftime('%u', time()) . '.png'
	reload 1
	update minute
	inverted 0
	visible 1
}

Widget Hour1 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%H', time()),0,1) . '.png'
	reload 1
	update second
	inverted 0
	visible 1
}

Widget Hour2 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%H', time()),1,1) . '.png'
	reload 1
	update second
	inverted 0
	visible 1
}

Widget Hourdot1 {
	class 'Image'
	file imgadir . 'timedot.png'
	reload 0
	update tick
	inverted 0
	visible (time() % 2) & 1
}

Widget Hourdot2 {
	class 'Image'
	file imgadir . 'timedot.png'
	reload 0
	update tick
	inverted 0
	visible (time() % 2) & 1
}

Widget Minute1 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%M', time()),0,1) . '.png'
	reload 1
	update second
	inverted 0
	visible 1
}

Widget Minute2 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%M', time()),1,1) . '.png'
	reload 1
	update second
	inverted 0
	visible 1
}

Widget Second1 {
	class 'Image'
	file imgadir . 'ts'. substr(strftime('%S', time()),0,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible 1
}

Widget Second2 {
	class 'Image'
	file imgadir . 'ts'. substr(strftime('%S', time()),1,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible 1
}



Widget CPUBar {
	class 'Bar'
	expression proc_stat::cpu('busy', 1000)
	max 100.0
	length 7
	direction 'E'
	update second
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget CPUText {
	class 'Text'
	expression proc_stat::cpu('busy', 1000)
	prefix 'C'
	postfix '%'
	precision 1
	width 7
	align 'R'
	update second
	Background 'FFFFFF00'
}

Widget RAMBar {
	class 'Bar'
	expression meminfo('MemTotal') - meminfo('MemFree')
	max meminfo('MemTotal')
	length 7
	direction 'E'
	update second
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget RAMText {
	class 'Text'
	expression showex?(meminfo('MemTotal')/1024):(meminfo('MemFree')/1024)
	prefix showex?'R':'r'
	postfix 'M'
	precision 0
	width 7
	align 'R'
	update second
	Background 'FFFFFF00'
}

Widget LoadBar {
	class 'Bar'
	expression loadavg(1)
	max 2.0
	length 7
	direction 'E'
	update second
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget LoadText {
	class 'Text'
	expression loadavg(1)
	postfix loadavg(1)>1.0?'!':''
	prefix 'L'
	width 7
	align 'R'
	precision 1
	update tick
	Background 'FFFFFF00'
}

Widget DownlinkBar {
	class 'Bar'
	expression (netdev(netdevice, 'Rx_bytes', 200)/1024)
	max 2000.0
	length 7
	direction 'E'
	update tick
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget DownlinkText {
	class 'Text'
	expression showex?(netdev::fast(netdevice, 'Rx_bytes', 1000)/1024):(netdev::fast(netdevice, 'Rx_bytes', 1000)/1024)
	max 2000.0
	prefix showex?'D':'D'
	postfix 'KB'
	width 7
	precision 0
	align 'R'
	update tick
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget SpaceBar {
	class 'Bar'
	expression statfs(SpaceDir, 'blocks') - statfs(SpaceDir, 'bavail')
	length 7
	direction 'E'
	max statfs(SpaceDir, 'blocks')
	update second
	Foreground '5f5f5f'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget SpaceText {
	class 'Text'
#	expression showex?(statfs(SpaceDir, 'blocks')*statfs(SpaceDir, 'bsize')/1073741824):(statfs(SpaceDir, 'bavail')*statfs(SpaceDir, 'bsize')/1073741824)
	expression showex?(statfs(SpaceDir, 'blocks')*statfs(SpaceDir, 'bsize')/1048576):(statfs(SpaceDir, 'bavail')*statfs(SpaceDir, 'bsize')/1048576)
	prefix showex?'H':'h'
#	postfix 'GB'
	postfix 'MB'
	precision 0
	width 7
	align 'R'
	update second
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget UplinkBar {
	class 'Bar'
	expression (netdev(netdevice, 'Tx_bytes', 200)/1024)
	max 2000.0
	length 7
	direction 'E'
	update tick
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget UplinkText {
	class 'Text'
	expression showex?(netdev::fast(netdevice, 'Tx_bytes', 1000)/1024):(netdev::fast(netdevice, 'Tx_bytes', 1000)/1024)
	max 2000.0
	prefix showex?'U':'U'
	postfix 'KB'
	width 7
	precision 0
	align 'R'
	update tick
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget UpText {
	class 'Text'
	expression showex?(uptime('%dDays %H:%M:%S')):(netinfo::ipaddr(netdevice))
	prefix showex?'Up:':'IP:'
	width 20
	align 'R'
	update tick
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget LcdLight{
	class 'Timer'
	expression LCD::backlight(file::readline(imgadir . 'lcds', strftime('%H', time()) + 1))
	active 1
	update minute
}

Widget ShowExinfo {
	class 'Timer'
	expression showex=(time() % 10 < 5)?1:0
	active 1
	update tick
}

Display 'DPF'

Layout layoutTime {
	Row10.Col4 'CPUText'
	Row11.Col4 'CPUBar'
	Row10.Col15 'LoadText'
	Row11.Col15 'LoadBar'
	Row12.Col4 'RAMText'
	Row13.Col4 'RAMBar'
	Row12.Col15 'DownlinkText'
	Row13.Col15 'DownlinkBar'
	Row14.Col4 'SpaceText'
	Row15.Col4 'SpaceBar'
	Row14.Col15 'UplinkText'
	Row15.Col15 'UplinkBar'
	Row16.Col2 'UpText'

	Layer 2 {
		X1.Y1 'Bgnd'
	}
	Layer 1 {
		X3.Y4 'Month1'
		X3.Y16 'Month2'
		X3.Y28 'Months'
		X3.Y40 'Day1'
		X3.Y52 'Day2'
		X3.Y79 'Week1'
		X24.Y6 'Hour1'
		X24.Y30 'Hour2'
		X28.Y61 'Hourdot1'
		X40.Y61 'Hourdot2'
		X24.Y76 'Minute1'
		X24.Y100 'Minute2'
		X52.Y59 'Second1'
		X52.Y66 'Second2'
	}
	Layer 0 {
	}
	Timer1 'LcdLight'
	Timer2 'ShowExinfo'
}

Layout 'layoutTime'

Variables {
	backlight 10
	tick 500
	tack 200
	second 1000
	minute 60000
	hour 3600000
	showex 1
	netdevice 'eth0' #网络状态的网络设备
	imgadir '/usr/share/lcd4linux/theme128/img/'
	datadir '/tmp/'
	SpaceDir '/overlay' #磁盘空间状态数据的目录
}
