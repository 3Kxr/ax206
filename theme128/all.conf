Display dpf {
	Driver 'DPF'
	Port 'usb0'
	Font '6x8'
	Foreground 'ffffff'
	Background 'ffffff00'
	Basecolor '000000' #ffffff00
	Orientation 0 # Orientation value from 0-3
	Backlight backlight # Backlight variable control
}

Widget Bgnd {
	class 'Image'
	file imgadir . 'back.png'
	reload 1
	update hour
	inverted 0
	visible 1
}

Widget Month1 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%m', time()),0,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Month2 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%m', time()),1,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Months {
	class 'Image'
	file imgadir . 'date-.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Day1 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%d', time()),0,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Day2 {
	class 'Image'
	file imgadir . 'date'. substr(strftime('%d', time()),1,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Week1 {
	class 'Image'
	file imgadir . 'week'. strftime('%u', time()) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Hour1 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%H', time()),0,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Hour2 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%H', time()),1,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Hourdot1 {
	class 'Image'
	file imgadir . 'timedot.png'
	reload 0
	update tick
	inverted 0
	visible (time() % 2) & showdate
}

Widget Hourdot2 {
	class 'Image'
	file imgadir . 'timedot.png'
	reload 0
	update tick
	inverted 0
	visible (time() % 2) & showdate
}

Widget Minute1 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%M', time()),0,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Minute2 {
	class 'Image'
	file imgadir . 'time'. substr(strftime('%M', time()),1,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Second1 {
	class 'Image'
	file imgadir . 'ts'. substr(strftime('%S', time()),0,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Second2 {
	class 'Image'
	file imgadir . 'ts'. substr(strftime('%S', time()),1,1) . '.png'
	reload 1
	update tick
	inverted 0
	visible showdate
}

Widget Weather1 {
	class 'Image'
	file imgadir . 'wbicons/'. file::readline(datadir . 'weather', 2) . DorN . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget Weatherdot {
	class 'Image'
	file imgadir . 'weatherdot.png'
	reload 0
	update tick
	inverted 0
	visible !showdate
}

Widget Weather2 {
	class 'Image'
	file imgadir . 'wsicons/'. file::readline(datadir . 'weather', 6) . DorN . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplA01 {
	class 'Image'
	file imgadir . 'wb'. substr(file::readline(datadir . 'weather', 3), 0, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplA02 {
	class 'Image'
	file imgadir . 'wb'. substr(file::readline(datadir . 'weather', 3), 1, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplA03 {
	class 'Image'
	file imgadir . 'wb'. substr(file::readline(datadir . 'weather', 3), 2, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplA04 {
	class 'Image'
	file imgadir . 'wb'. substr(file::readline(datadir . 'weather', 3), 3, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB01 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 0, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB02 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 1, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB03 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 2, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB04 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 3, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB05 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 4, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB06 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 5, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB07 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 6, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB08 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 7, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB09 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 8, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget WeaTmplB10 {
	class 'Image'
	file imgadir . 'ws'. substr(file::readline(datadir . 'weather', 5), 9, 1) . '.png'
	reload 1
	update tick
	inverted 0
	visible !showdate
}

Widget CPUBar {
	class 'Bar'
	expression proc_stat::cpu('busy', 1000)
	max 100.0
	length 7
	direction 'E'
	update second
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget CPUText {
	class 'Text'
	expression proc_stat::cpu('busy', 1000)
	prefix 'C'
	postfix '%'
	precision 1
	width 7
	align 'R'
	update second
	Background 'FFFFFF00'
}

Widget RAMBar {
	class 'Bar'
	expression meminfo('MemTotal') - meminfo('MemFree')
	max meminfo('MemTotal')
	length 7
	direction 'E'
	update second
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget RAMText {
	class 'Text'
	expression showex?(meminfo('MemTotal')/1024):(meminfo('MemFree')/1024)
	prefix showex?'R':'r'
	postfix 'M'
	precision 0
	width 7
	align 'R'
	update second
	Background 'FFFFFF00'
}

Widget LoadBar {
	class 'Bar'
	expression loadavg(1)
	max 2.0
	length 7
	direction 'E'
	update second
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget LoadText {
	class 'Text'
	expression loadavg(1)
	postfix loadavg(1)>1.0?'!':''
	prefix 'L'
	width 7
	align 'R'
	precision 1
	update tick
	Background 'FFFFFF00'
}

Widget DownlinkBar {
	class 'Bar'
	expression (netdev(netdevice, 'Rx_bytes', 200)/1024)
	max 2000.0
	length 7
	direction 'E'
	update tick
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget DownlinkText {
	class 'Text'
	expression showex?(netdev::fast(netdevice, 'Rx_bytes', 1000)/1024):(netdev::fast(netdevice, 'Rx_bytes', 1000)/1024)
	max 2000.0
	prefix showex?'D':'D'
	postfix 'KB'
	width 7
	precision 0
	align 'R'
	update tick
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget SpaceBar {
	class 'Bar'
	expression statfs(SpaceDir, 'blocks') - statfs(SpaceDir, 'bavail')
	length 7
	direction 'E'
	max statfs(SpaceDir, 'blocks')
	update second
	Foreground '5f5f5f'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget SpaceText {
	class 'Text'
#	expression showex?(statfs(SpaceDir, 'blocks')*statfs(SpaceDir, 'bsize')/1073741824):(statfs(SpaceDir, 'bavail')*statfs(SpaceDir, 'bsize')/1073741824)
	expression showex?(statfs(SpaceDir, 'blocks')*statfs(SpaceDir, 'bsize')/1048576):(statfs(SpaceDir, 'bavail')*statfs(SpaceDir, 'bsize')/1048576)
	prefix showex?'H':'h'
#	postfix 'GB'
	postfix 'MB'
	precision 0
	width 7
	align 'R'
	update second
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget UplinkBar {
	class 'Bar'
	expression (netdev(netdevice, 'Tx_bytes', 200)/1024)
	max 2000.0
	length 7
	direction 'E'
	update tick
	Foreground '000000'
	Background '00FF00FF'
	BarColor0 'FF0000'
	BarColor1 'EE3333'
}

Widget UplinkText {
	class 'Text'
	expression showex?(netdev::fast(netdevice, 'Tx_bytes', 1000)/1024):(netdev::fast(netdevice, 'Tx_bytes', 1000)/1024)
	max 2000.0
	prefix showex?'U':'U'
	postfix 'KB'
	width 7
	precision 0
	align 'R'
	update tick
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget UpText {
	class 'Text'
	expression showex?(uptime('%dDays %H:%M:%S')):(netinfo::ipaddr(netdevice))
	prefix showex?'Up:':'IP:'
	width 20
	align 'R'
	update tick
	Foreground 'ffffff'
	Background 'FFFFFF00'
}

Widget DorNFlag {
	class 'Timer'
	expression DorN=(((strftime('%H%M', time()))>(file::readline(datadir.'weather',11))) & ((strftime('%H%M', time()))<(file::readline(datadir.'weather',12)+1200)))?'d':'n'
	active 1
	update minute
}

Widget LcdLight{
	class 'Timer'
	expression LCD::backlight(file::readline(imgadir . 'lcds', strftime('%H', time()) + 1))
	active 1
	update minute
}

Widget DateOrWeather {
	class 'Timer'
	expression showdate=(time() % 15 < 10)?1:0
	active 1
	update tack
}

Widget ShowExinfo {
	class 'Timer'
	expression showex=(time() % 10 < 5)?1:0
	active 1
	update tick
}

Display 'DPF'

Layout layoutAll {
	Row10.Col4 'CPUText'
	Row11.Col4 'CPUBar'
	Row10.Col15 'LoadText'
	Row11.Col15 'LoadBar'
	Row12.Col4 'RAMText'
	Row13.Col4 'RAMBar'
	Row12.Col15 'DownlinkText'
	Row13.Col15 'DownlinkBar'
	Row14.Col4 'SpaceText'
	Row15.Col4 'SpaceBar'
	Row14.Col15 'UplinkText'
	Row15.Col15 'UplinkBar'
	Row16.Col2 'UpText'

	Layer 2 {
		X1.Y1 'Bgnd'
	}
	Layer 1 {
		X1.Y1 'Weather1'
		X4.Y91 'Weatherdot'
		X1.Y99 'Weather2'

	}
	Layer 0 {
		X27.Y76 'WeaTmplA01'
		X27.Y89 'WeaTmplA02'
		X27.Y102 'WeaTmplA03'
		X27.Y115 'WeaTmplA04'

		X47.Y57 'WeaTmplB01'
		X47.Y64 'WeaTmplB02'
		X47.Y71 'WeaTmplB03'
		X47.Y78 'WeaTmplB04'
		X47.Y85 'WeaTmplB05'
		X47.Y92 'WeaTmplB06'
		X47.Y99 'WeaTmplB07'
		X47.Y106 'WeaTmplB08'
		X47.Y113 'WeaTmplB09'
		X47.Y120 'WeaTmplB10'

		X3.Y4 'Month1'
		X3.Y16 'Month2'
		X3.Y28 'Months'
		X3.Y40 'Day1'
		X3.Y52 'Day2'
		X3.Y79 'Week1'
		X24.Y6 'Hour1'
		X24.Y30 'Hour2'
		X28.Y61 'Hourdot1'
		X40.Y61 'Hourdot2'
		X24.Y76 'Minute1'
		X24.Y100 'Minute2'
		X52.Y59 'Second1'
		X52.Y66 'Second2'
	}
	Timer1 'DorNFlag'
	Timer2 'LcdLight'
	Timer3 'DateOrWeather'
	Timer4 'ShowExinfo'
}

Layout 'layoutAll'

Variables {
	backlight 10
	tick 500
	tack 200
	second 1000
	minute 60000
	hour 3600000
	showdate 1
	showex 1
	DorN 'd'
	netdevice 'eth0' #ÍøÂç×´Ì¬µÄÍøÂçÉè±¸
	imgadir '/usr/share/lcd4linux/theme128/img/'
	datadir '/tmp/'
	SpaceDir '/overlay' #´ÅÅÌ¿Õ¼ä×´Ì¬Êı¾İµÄÄ¿Â¼
}
